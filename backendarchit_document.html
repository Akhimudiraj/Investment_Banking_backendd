 Investment Banking Backend Architecture & Documentation
1. Project Overview

Project Name: Investment Banking Backend
Technology Stack:

Java 17

Spring Boot

Spring Security + JWT

Spring Data JPA (Hibernate)

MySQL

Lombok

Maven

Frontend (Consumer):

Angular (http://localhost:4200
)

Backend (API Provider):

Spring Boot (http://localhost:8080
)

2. High-Level Backend Architecture
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend (UI)    â”‚  Angular / Postman
â”‚  http://localhost  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ HTTP + JWT
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Controller Layer   â”‚  (@RestController)
â”‚ (Presentation)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ DTOs
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Service Layer      â”‚  (@Service)
â”‚ (Business Logic)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ Entities
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Repository Layer   â”‚  (JpaRepository)
â”‚ (Data Access)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚ JPA/Hibernate
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MySQL Database   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

3. Layer-wise Architecture Explanation
ğŸ”¹ 1ï¸âƒ£ Presentation Layer (Controller Layer)
Responsibility:

Expose REST APIs

Handle HTTP requests & responses

Perform validation

Apply authorization rules

Key Controllers:

AuthController â€“ Login & JWT generation

AdminController â€“ Admin operations

DealController â€“ Deal management

UserController â€“ Current user info

Characteristics:

âœ” Uses DTOs
âœ” No business logic
âœ” Uses @PreAuthorize for role-based access

Example:

@PostMapping("/login")
public ResponseEntity<TokenDTO> login(@RequestBody AuthDTO dto)

ğŸ”¹ 2ï¸âƒ£ Service Layer (Business Logic Layer)
Responsibility:

Core business rules

Security context usage

Validation & orchestration

DTO â†” Entity conversion

Transaction management

Key Services:

AuthService

DealService

UserService

CustomUserDetailsService

Business Logic Examples:

Authenticate user and generate JWT

Only logged-in users can create deals

Admin-only deal value update

Validate user activity status

Prevent duplicate users

Characteristics:

âœ” Annotated with @Service
âœ” Uses @Transactional
âœ” Contains all business rules

ğŸ”¹ 3ï¸âƒ£ Repository Layer (Data Access Layer)
Responsibility:

Database interaction

CRUD operations

Query execution

Key Repositories:

UserRepository

DealRepository

Features:

Extends JpaRepository

Uses derived queries

Uses custom @Query for dynamic search

Example:

List<Deal> findByAssignedToId(Long userId);


âœ” Interface-only
âœ” Implementation generated by Spring

ğŸ”¹ 4ï¸âƒ£ Entity Layer (Persistence Layer)
Responsibility:

Represent database tables

Define relationships

Handle lifecycle events

Key Entities:

User

Deal

Note

JPA Features Used:

@Entity, @Table

@OneToMany, @ManyToOne

@Enumerated(EnumType.STRING)

@PrePersist, @PreUpdate

âœ” Database mapping only
âœ” No API exposure

ğŸ”¹ 5ï¸âƒ£ DTO Layer (Data Transfer Layer)
Responsibility:

Control API input/output

Apply validation

Hide entity internals

Examples:

AuthDTO, TokenDTO

CreateDealDTO, DealDTO

AddNoteDTO

UserDTO

âœ” Used in controllers
âœ” Prevents over-posting
âœ” Enables clean API contracts

4. Security Architecture (JWT-based)
ğŸ” Authentication Flow
Client â†’ /api/auth/login
        â†’ Username + Password
        â†’ AuthenticationManager
        â†’ JWT Generated
        â†’ Token Returned

ğŸ” Authorization Flow (Every Request)
Request â†’ JWTFilter
        â†’ Extract JWT
        â†’ Validate Token
        â†’ Set SecurityContext
        â†’ Controller Access

Security Components:

SecurityConfig â€“ Security rules

JWTFilter â€“ Token validation

JWTUtils â€“ Token generation

CustomUserDetailsService â€“ Load users

âœ” Stateless authentication
âœ” Role-based authorization
âœ” Secure endpoints

5. Role-Based Access Control (RBAC)
Role	Permissions
USER	Create deals, update stage, add notes
ADMIN	Create users, delete deals, update value

Implemented using:

@PreAuthorize("hasRole('ADMIN')")

6. CORS Architecture
Problem:

Frontend and backend run on different ports.

Solution:

@CrossOrigin

Global CORS config in SecurityConfig

Allowed:

http://localhost:4200

7. Exception Handling Strategy
Custom Exceptions:

ResourceNotFoundException

ValidationException

Purpose:

âœ” Clear error messages
âœ” Business rule violations

8. Database Design (Conceptual)
User (1) â”€â”€â”€â”€< Deal >â”€â”€â”€â”€ (1) User
                |
                |
              Notes


One User â†’ Many Deals

One Deal â†’ Many Notes

9. Configuration Management
application.properties:

Server config

DB config

JPA config

JWT config

CORS config

âœ” Externalized configuration
âœ” Easy environment change